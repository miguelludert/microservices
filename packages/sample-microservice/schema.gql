enum TodoStatusEnum  {
    New,
    Active,
    Complete,
    Deleted
}

type TodoTask 
    @auth(rules: [{ allow: public }])
    @model 
{
    id: ID!
    description: String!
    completedDate: AWSDateTime
    status: TodoStatusEnum!
    sharedWith : [SharedWith] @hasMany
}

input TaskCompletedInput {
    id: ID!
    emailAddress: String!
}

type SharedWith 
    @auth(rules: [{ allow: public }])
    @model( mutations : null)
{
    id: ID!
    emailAddress: String!
    date: AWSDateTime!
}

# type Query 
# @aws_api_key
# {

# }

type Mutation {
    shareTask(
        id: ID!
        emailAddress: String!
    ): Boolean
        @function(name: "share-task")
        @auth(rules: [{ allow: public }])

   notifyTaskCompleted(input: TaskCompletedInput): SharedWith
}

# type Subscription @aws_api_key {
#   onTaskCompleted(owner: ID!): TaskCompletedResult @aws_subscribe(mutations: ["notifyTaskCompleted"])
# }